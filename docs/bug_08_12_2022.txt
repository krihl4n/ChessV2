FIXED

Register a new game for x0frkbdn

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br | bn | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp | bp | bp | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
2  | wp | wp | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr | wn | wb | wq | wk | wb | wn | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br | bn | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp | bp | bp | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    | wn |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
2  | wp | wp | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr |    | wb | wq | wk | wb | wn | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h
Move(from=c7, to=c5)

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br | bn | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp | bp |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    |    | bp |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    | wn |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
2  | wp | wp | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr |    | wb | wq | wk | wb | wn | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br | bn | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp | bp |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    |    | bp |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    | wn |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    | wp | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr |    | wb | wq | wk | wb | wn | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h
Move(from=b8, to=c6)

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp | bp |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    |    | bn |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    |    | bp |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    | wn |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    | wp | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr |    | wb | wq | wk | wb | wn | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp | bp |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    |    | bn |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    |    | bp |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    | wn |    |    |    |    | wn |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    | wp | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr |    | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h
Move(from=c6, to=e5)

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp | bp |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    |    | bp |    | bn |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    | wn |    |    |    |    | wn |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    | wp | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr |    | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp | bp |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    |    | bp |    | bn |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp | wp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    | wn |    |    |    |    | wn |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    |    | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr |    | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h
Move(from=c5, to=c4)

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp | bp |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    |    |    |    | bn |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp | wp | bp |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    | wn |    |    |    |    | wn |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    |    | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr |    | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp | bp |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    |    |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    | wp |    |    | bn |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    | bp |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    | wn |    |    |    |    | wn |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    |    | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr |    | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h
Move(from=b7, to=b6)

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp |    |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    | bp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    | wp |    |    | bn |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    | bp |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    | wn |    |    |    |    | wn |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    |    | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr |    | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp |    |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    | bp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    | wp |    |    | bn |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    | bp |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    |    |    |    |    |    | wn |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    |    | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr | wn | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h
Move(from=e5, to=f3)

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp |    |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    | bp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    | wp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    | bp |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    |    |    |    | bn |    | wn |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    |    | wp | wp | wp | wp | wp | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr | wn | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb | bq | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp |    |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    | bp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    | wp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    | bp |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    |    |    |    | wp |    | wn |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    |    | wp | wp | wp | wp |    | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr | wn | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h
Move(from=d8, to=c7)

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb |    | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp |    | bq | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    | bp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    | wp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    | bp |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    |    |    |    | wp |    | wn |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    |    | wp | wp | wp | wp |    | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr | wn | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb |    | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp |    | bq | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    | bp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    | wp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    | bp |    |    | wn |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    |    |    |    | wp |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    |    | wp | wp | wp | wp |    | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr | wn | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h
Move(from=c7, to=e5)

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb |    | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp |    |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    | bp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    | wp |    |    | bq |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    | bp |    |    | wn |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    |    |    |    | wp |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    |    | wp | wp | wp | wp |    | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr | wn | wb | wq | wk | wb |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb |    | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp |    |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    | bp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    | wp |    |    | bq |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    | bp |    |    | wn |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    |    |    |    | wp |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    |    | wp | wp | wp | wp | wb | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr | wn | wb | wq | wk |    |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h
Move(from=e5, to=b2)

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb |    | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp |    |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    | bp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    | wp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    | bp |    |    | wn |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    |    |    |    | wp |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    | bq | wp | wp | wp | wp | wb | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr | wn | wb | wq | wk |    |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h

    ---- ---- ---- ---- ---- ---- ---- ----
8  | br |    | bb |    | bk | bb | bn | br |
    ---- ---- ---- ---- ---- ---- ---- ----
7  | bp |    |    | bp | bp | bp | bp | bp |
    ---- ---- ---- ---- ---- ---- ---- ----
6  |    | bp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
5  |    | wp |    |    |    |    |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
4  | wp |    | bp |    |    | wn |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
3  |    |    |    |    |    | wp |    |    |
    ---- ---- ---- ---- ---- ---- ---- ----
2  |    | wb | wp | wp | wp | wp | wb | wp |
    ---- ---- ---- ---- ---- ---- ---- ----
1  | wr | wn |    | wq | wk |    |    | wr |
    ---- ---- ---- ---- ---- ---- ---- ----
     a    b    c    d    e    f    g    h
Move(from=c8, to=b7)
2022-12-08 23:12:04.580 ERROR 17636 --- [boundChannel-31] .WebSocketAnnotationMethodMessageHandler : Unhandled exception from message handler method

org.springframework.messaging.MessageHandlingException: Unexpected handler method invocation error; nested exception is java.lang.StackOverflowError
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:588) ~[spring-messaging-5.3.14.jar:5.3.14]
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:511) ~[spring-messaging-5.3.14.jar:5.3.14]
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:94) ~[spring-messaging-5.3.14.jar:5.3.14]
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:524) ~[spring-messaging-5.3.14.jar:5.3.14]
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:458) ~[spring-messaging-5.3.14.jar:5.3.14]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:144) ~[spring-messaging-5.3.14.jar:5.3.14]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]
Caused by: java.lang.StackOverflowError: null
	at kotlin.collections.CollectionsKt__IterablesKt.collectionSizeOrNull(Iterables.kt:33) ~[kotlin-stdlib-1.6.10.jar:1.6.10-release-923(1.6.10)]
	at kotlin.collections.SetsKt___SetsKt.plus(_Sets.kt:122) ~[kotlin-stdlib-1.6.10.jar:1.6.10-release-923(1.6.10)]
	at com.krihl4n.moveCalculators.RookMoveCalculator.calculateMoves(RookMoveCalculator.kt:9) ~[main/:na]
	at com.krihl4n.moveCalculators.PieceMoveCalculator.findMoves(PieceMoveCalculator.kt:18) ~[main/:na]
	at com.krihl4n.guards.CastlingGuard.isFieldUnderAttackByColor(CastlingGuard.kt:127) ~[main/:na]
	at com.krihl4n.guards.CastlingGuard.attacksAnyOfFields(CastlingGuard.kt:104) ~[main/:na]
	at com.krihl4n.guards.CastlingGuard.canBlackKingLongCastle(CastlingGuard.kt:100) ~[main/:na]
	at com.krihl4n.moveCalculators.KingMoveCalculator.calculateMoves(KingMoveCalculator.kt:19) ~[main/:na]